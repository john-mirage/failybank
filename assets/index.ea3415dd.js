const P=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};P();const B={bank:"fleeca",hasEnterprise:!1,hasOffshore:!1,account:{personal:{owner:"Garry Green",number:"0123456789",balance:48569,theme:"dark",favoriteAccounts:[{name:"Lena Silvo",number:"0123456789"},{name:"Owen Chapman",number:"1234567890"},{name:"Pamela Padilla",number:"2345678901"},{name:"Garry Green",number:"3456789012"},{name:"Quentin Cooper",number:"4567890123"}],logs:[{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"}]},enterprise:{owner:"Arthur Popov",balance:485321,logs:[{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"}]},offshore:{owner:"Quentin Cooper",balance:4123547,logs:[{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"},{label:"D\xE9pot",amount:15e3,date:"2022-04-19T15:00",reference:"Failygames",type:"operation"},{label:"Retrait",amount:-5e3,date:"2022-04-15T15:00",reference:"American Restaurant Company",type:"operation"},{label:"Transfert",amount:-8e3,date:"2022-04-14T15:00",reference:"Owen Chapman",type:"transfer"}]}}},y=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",signDisplay:"always",maximumFractionDigits:0}),S=new Intl.DateTimeFormat("fr-FR",{dateStyle:"long",timeStyle:"short"});function k(t){switch(t){case"fleeca":document.documentElement.classList.add("fleeca");break;case"maze":document.documentElement.classList.add("maze");break;default:throw new Error("The theme is not valid")}}k(B.bank);function M(t,e){return t.validity.valid?(e.textContent.length>0&&(e.textContent=""),!0):(t.validity.valueMissing?e.textContent="Veuillez entrer un nom":t.validity.tooLong?e.textContent="Le nom ne doit pas exeder 40 caract\xE8res":e.textContent="Il y a une erreur",!1)}function _(t,e){return t.validity.valid?(e.textContent.length>0&&(e.textContent=""),!0):(t.validity.valueMissing?e.textContent="Veuillez entrer un num\xE9ro de compte":t.validity.tooShort||t.validity.tooLong?e.textContent="Le num\xE9ro de compte doit comporter 10 chiffres":t.validity.patternMismatch?e.textContent="Le num\xE9ro de compte ne comporte que des chiffres":e.textContent="Il y a une erreur",!1)}function b(t,e){if(t.validity.valid){if(Number(t.value)<50)return e.textContent="Le montant doit \xEAtre sup\xE9rieur o\xF9 \xE9gale \xE0 50$",!1}else return t.validity.valueMissing?e.textContent="Veuillez entrer un montant":t.validity.patternMismatch?e.textContent="Le montant ne doit comporter que des chiffres":e.textContent="Il y a une erreur",!1;return e.textContent.length>0&&(e.textContent=""),!0}function F(t,e,n){const a=Number(t.value);return n<a?(e.textContent="Vous n'avez pas les fonds n\xE9cessaires",!1):!0}function V(t,e){return t.validity.valid?(e.textContent.length>0&&(e.textContent=""),!0):(t.validity.valueMissing?e.textContent="Veuillez entrer la r\xE9f\xE9rence du transfert":t.validity.tooLong?e.textContent="La r\xE9f\xE9rence du transfert ne doit exeder 40 caract\xE8res":e.textContent="Il y a une erreur",!1)}const q=document.getElementById("log-template"),d=10;class x{constructor(e,n){this.logList=n,this.logs=e,this.page=1,this.observer=new IntersectionObserver(a=>this.getNextPage(a)),this.observedLog=!1,this.getPageNumber(),this.getPageLogs(),this.createPageLogs()}addLog(e){this.logs.unshift(e),this.resetList()}createLog(e,n=!1,a=!1){const o=q.content.cloneNode(!0),r=o.querySelector(".log"),l=r.querySelector(".log__icon"),m=r.querySelector(".log__type"),D=r.querySelector(".log__date"),g=r.querySelector(".log__amount"),O=r.querySelector(".log__reference");l.classList.add(`log__icon--${e.type}`),g.classList.add(`log__amount--${e.amount>0?"up":"down"}`),m.textContent=e.label,D.textContent=S.format(new Date(e.date)),g.textContent=y.format(e.amount),O.textContent=e.reference,n?this.logList.prepend(o):this.logList.appendChild(o),a&&(this.observedLog=r,this.observer.observe(r))}createPageLogs(){this.observedLog&&(this.observer.unobserve(this.observedLog),this.observedLog=!1),this.pageLogs.forEach((e,n)=>{const a=n===this.pageLogs.length-1,o=this.page<this.pageNumber;a&&o?this.createLog(e,!1,!0):this.createLog(e)})}getNextPage(e){e[0].isIntersecting&&(this.page+=1,this.getPageLogs(),this.createPageLogs())}getPageNumber(){const e=this.logs.length;this.pageNumber=Math.ceil(e/d)}getPageLogs(){const e=d*(this.page-1),n=d*this.page;this.pageLogs=this.logs.slice(e,n)}resetList(){this.logList.innerHTML="",this.page=1,this.getPageLogs(),this.createPageLogs()}}const v=document.getElementById("account-delete-list"),z=document.getElementById("account-delete-template"),L=document.getElementById("account-paste-list"),G=document.getElementById("account-paste-template"),W=document.getElementById("personal-favorite-account-sum-text"),c=document.getElementById("personal-favorite-account-form-button"),$=5;class U{constructor(e){this.accounts=e,this.createList(),this.handleAddButton()}addAccount(e){if(this.accounts.length<$)this.accounts=[e,...this.accounts],this.resetList();else throw new Error("Account limit is reached")}deleteAccount(e){this.accounts=this.accounts.filter(n=>n.number!==e.number),this.resetList()}createDeleteAccount(e){const n=z.content.cloneNode(!0),a=n.querySelector(".account"),o=a.querySelector(".account__name"),r=a.querySelector(".account__number"),l=a.querySelector(".account__text-button");o.textContent=e.name,r.textContent=e.number,l.addEventListener("click",()=>{this.deleteAccount(e)},{once:!0}),v.appendChild(n)}createPasteAccount(e){const n=G.content.cloneNode(!0),a=n.querySelector(".account"),o=a.querySelector(".account__name"),r=a.querySelector(".account__number");o.textContent=e.name,r.textContent=e.number,a.addEventListener("click",()=>{u.value!==e.number&&(u.value=e.number)}),L.appendChild(n)}createList(){this.accounts.forEach(e=>{this.createDeleteAccount(e),this.createPasteAccount(e)})}resetList(){v.innerHTML="",L.innerText="",this.createList(),this.handleAddButton()}handleAddButton(){const e=this.accounts.length;W.textContent=`[${String(e)}/5]`,e>=5?c.classList.contains("button--primary")&&(c.classList.replace("button--primary","button--disabled"),c.setAttribute("disabled","")):c.classList.contains("button--disabled")&&(c.classList.replace("button--disabled","button--primary"),c.removeAttribute("disabled"))}}const R=document.getElementById("personal-theme-button");class H{constructor(e,n,a,o){this.owner=e.owner,this.ownerElement=n,this.balance=e.balance,this.balanceElement=a,this.logList=new x(e.logs,o),this.displayOwner(),this.displayBalance()}displayOwner(){this.ownerElement.textContent=this.owner}displayBalance(){this.balance<1?this.balanceElement.classList.contains("section__number--up")?this.balanceElement.classList.replace("section__number--up","section__number--down"):this.balanceElement.classList.contains("section__number--down")||this.balanceElement.classList.add("section__number--down"):this.balanceElement.classList.contains("section__number--down")?this.balanceElement.classList.replace("section__number--down","section__number--up"):this.balanceElement.classList.contains("section__number--up")||this.balanceElement.classList.add("section__number--up"),this.balanceElement.textContent=y.format(this.balance)}}class Q extends H{constructor(e,n,a,o,r,l){super(e,n,a,o),this.number=e.number,this.numberElement=r,this.theme=e.theme,this.theme==="dark"&&(R.checked=!0,document.documentElement.classList.add("dark")),this.favoriteAccountList=new U(e.favoriteAccounts),this.operationLogList=new x(e.logs.filter(m=>m.type==="operation"),l),this.displayNumber()}displayNumber(){this.numberElement.textContent=this.number}displayBalance(){this.balance<1?this.balanceElement.classList.contains("balance__value--down")||this.balanceElement.classList.add("balance__value--down"):this.balanceElement.classList.contains("balance__value--down")&&this.balanceElement.classList.remove("balance__value--down"),this.balanceElement.textContent=y.format(this.balance)}}const K=document.getElementById("personal-deposit-form"),j=document.getElementById("personal-withdraw-form"),J=document.getElementById("personal-transfer-form"),E=document.getElementById("personal-deposit-amount-input"),X=document.getElementById("personal-deposit-amount-message"),p=document.getElementById("personal-withdraw-amount-input"),T=document.getElementById("personal-withdraw-amount-message"),f=document.getElementById("personal-transfer-amount-input"),w=document.getElementById("personal-transfer-amount-message"),u=document.getElementById("personal-transfer-account-number-input"),Y=document.getElementById("personal-transfer-account-number-message"),I=document.getElementById("personal-transfer-reference-input"),Z=document.getElementById("personal-transfer-reference-message"),ee=document.getElementById("personal-favorite-account-form"),C=document.getElementById("personal-favorite-account-name-input"),te=document.getElementById("personal-favorite-account-name-message"),A=document.getElementById("personal-favorite-account-number-input"),ne=document.getElementById("personal-favorite-account-number-message");function h(){return new Date().toISOString()}const s=new Q(B.account.personal,document.getElementById("personal-account-owner"),document.getElementById("personal-account-balance"),document.getElementById("personal-account-log-list"),document.getElementById("personal-account-number"),document.getElementById("personal-account-operation-log-list"));function ae(t){s.theme=t.target.checked?"dark":"light",s.theme==="dark"?document.documentElement.classList.contains("dark")||document.documentElement.classList.add("dark"):document.documentElement.classList.contains("dark")&&document.documentElement.classList.remove("dark")}function oe(t){t.preventDefault();const e=M(C,te),n=_(A,ne);if(e&&n){const a={name:C.value,number:A.value};s.favoriteAccountList.addAccount(a)}}function re(t){if(t.preventDefault(),b(E,X)){const n=Number(E.value),a={label:"D\xE9pot",amount:n,date:h(),reference:"D\xE9pot sur votre compte",type:"operation"};s.logList.addLog(a),s.operationLogList.addLog(a),s.balance+=n,s.displayBalance()}}function se(t){t.preventDefault();const e=b(p,T),n=e?F(p,T,s.balance):!1;if(e&&n){const a=Number(p.value),o={label:"Retrait",amount:-a,date:h(),reference:"Retrait depuis votre compte",type:"operation"};s.logList.addLog(o),s.operationLogList.addLog(o),s.balance-=a,s.displayBalance()}}function le(t){t.preventDefault();const e=b(f,w),n=e?F(f,w,s.balance):!1,a=_(u,Y),o=V(I,Z);if(e&&n&&a&&o){const r=Number(f.value);u.value;const l=I.value,m={label:"Transfert",amount:-r,date:h(),reference:l,type:"operation"};s.logList.addLog(m),s.balance-=r,s.displayBalance()}}R.addEventListener("change",ae);ee.addEventListener("submit",oe);K.addEventListener("submit",re);j.addEventListener("submit",se);J.addEventListener("submit",le);{const t=document.getElementById("enterprise-tab"),e=document.getElementById("enterprise-tab-view"),n=document.getElementById("offshore-tab"),a=document.getElementById("offshore-tab-view");t.remove(),e.remove(),n.remove(),a.remove()}const N=[{type:"personal",container:document.getElementById("personal-tab"),radio:document.getElementById("personal-tab-input"),view:document.getElementById("personal-tab-view")},{type:"personal",container:document.getElementById("personal-operation-tab"),radio:document.getElementById("personal-operation-tab-input"),view:document.getElementById("personal-operation-tab-view")},{type:"personal",container:document.getElementById("personal-transfer-tab"),radio:document.getElementById("personal-transfer-tab-input"),view:document.getElementById("personal-transfer-tab-view")},{type:"enterprise",container:document.getElementById("enterprise-tab"),radio:document.getElementById("enterprise-tab-input"),view:document.getElementById("enterprise-tab-view")},{type:"offshore",container:document.getElementById("offshore-tab"),radio:document.getElementById("offshore-tab-input"),view:document.getElementById("offshore-tab-view")}];let i=N[0];function ie(t){t.radio.addEventListener("change",()=>{t.type==="offshore"?(i.container.classList.remove("tab-list__item--active"),i.view.classList.remove("view--active"),t.view.classList.add("view--active")):i.type==="offshore"?(i.view.classList.remove("view--active"),t.container.classList.add("tab-list__item--active"),t.view.classList.add("view--active")):(i.container.classList.remove("tab-list__item--active"),i.view.classList.remove("view--active"),t.container.classList.add("tab-list__item--active"),t.view.classList.add("view--active")),i=t})}N.forEach(t=>{t.type!=="personal"||ie(t)});const ce=document.getElementById("app");setTimeout(()=>{ce.classList.replace("app--loading","app--loaded")},1e3);
